<!doctype html>
<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
        <title>Client/Server applications</title>
    
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/theme/white.css" id="theme">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/zenburn.min.css">
        
        <link rel="stylesheet" href="./fontawesome-6.2.0/css/all.min.css">
        <link rel="stylesheet" href="./style.css">
    
        <script src="print.js"></script>
    
    </head>

	<body>

		<div class="reveal">
			<div class="slides">
                <section>
                    <section data-background="#333333">
                        <h2>Web</h2>
                        <h1>Client-Server Applications</h1>
                        <p>Bertil Chapuis</p>
                    </section>
                    <section data-markdown>
                        <textarea data-template>
                            ## <i class="fas fa-tasks"></i> Overview of Today's Class
                            - Client-Server Applications
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-background="#333333">
                        <h2><i class="fab fa-js"></i> Client-Server Applications</h2>
                    </section>

                    <section data-markdown style="font-size: 0.8em;">
                        <textarea data-template>
                            ## <i class="fas fa-cogs"></i> Anatomy of a web application                            

                            <img src="images/client-server.png" alt="client/server" style="width: 80%;" />

                            https://developer.mozilla.org/en-US/docs/Learn/Server-side/First_steps/Client-Server_overview

                            Notes:

                            1. The client makes an HTTP GET request to the server
                            2. The server receives the request and forwards the requested data to the web application
                            3. The web application might query a database to obtain necessary data for the response
                            4. The web application generates an HTML page and sends it back to the web server
                            5. The web server sends the HTTP response containing the document to the client
                            6. The client renders the document. If it contains references to external resources, the client makes additional HTTP requests to the web server.
                            7. The web server might also retrieve files directly from the file system, for example images, CSS stylesheets, or JavaScript files.

                        </textarea>
                    </section>

                    
                    <section data-markdown style="font-size: 0.6em;">
                        <textarea data-template>
                            ## <i class="fas fa-cogs"></i> HTML Forms (Client-side)        

                            HTML forms are the most common way to collect user input, send it to a server, and receive a response. The form itself is written in HTML, and the server's response is typically HTML as well.

                            ```html
                            <form action='/form.php' method='POST'>
                                <label for="email">E-mail:</label>
                                <input type="email" id="email" name="email" />
                                <label>Title:
                                    <input type="text" id="title" name="title" />
                                </label>
                                <label for="content">Content:</label>
                                <textarea id="content" name="content" />
                                <button type="submit">Save</button>
                            </form>
                            ```

                            - The form's action attribute defines where the form data is sent.
                            - The form's method attribute defines how the data is sent.
                            - The form's input elements define the data fields the form collects.
                            - The form's button element defines the button the user clicks to send the data to the server.
                            
                            https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Your_first_HTML_form
                        
                        </textarea>
                    </section>

                    <section data-markdown style="font-size: 0.6em;">
                        <textarea data-template>
                            ## <i class="fas fa-cogs"></i> HTML Forms (Server-side)        

                            The server-side code that processes the form data is typically written in a server-side language such as PHP, Python, or Java. 
                         
                            ```php
                            <?php
                                $email = $_POST['email'];
                                $title = $_POST['title'];
                                $content = $_POST['content'];
                                
                                // Do something with the data...
                                
                                echo "Thank you for your message!";
                            ?>
                            ```

                            Here, the server-side code retrieves the data from the form using the $_POST array. 
                            The data is then processed and a response is sent back to the client.

                        </textarea>
                    </section>

                    <section data-markdown style="font-size: 0.8em;">
                        <textarea data-template>
                            ## <i class="fab fa-js"></i> ExpressJS (Server-side)

                            Today, Javascript is a popular choice for server-side programming.

                            Express is a minimal and flexible Node.js web application framework that provides a robust set of features for web applications.

                            Web frameworks usually come with:
                            - A **middleware** layer that processes HTTP requests and responses.
                            - A **router** that helps at mapping HTTP requests to the appropriate code.
                            - A **template engine** that helps at generating HTML pages.

                            https://expressjs.com/

                            Notes:

                            The line between middleware and router is sometimes blurry. The middleware layer is usually used to process the request and response, while the router is used to map the request to the appropriate code.
                            
                        </textarea>
                    </section>

                    <section data-markdown style="font-size: 0.8em;">
                        <textarea data-template>
                            ## <i class="fas fa-hand-paper"></i> ExpressJS (Server-side)

                            ```js
                            const express = require('express')
                            
                            // Create an express app
                            const app = express();
                            
                            // Serve GET requests on a given url
                            app.get(url, (req, res) => {
                                // handle request (req.cookies, req.body, req.ip, req.query)
                                let args = req.query // Object with one property per parameter
                                // handle response (res.status, res.redirect, res.json)
                                res.status(200)
                                res.send(...); // Sends an HTTP response
                            });
                            
                            // Serve POST requests on a given url. Similar exist for PUT and DELETE requests.
                            app.post(url, (req, res) => { ... });
                            
                            // Serve static files (images, css files, js files, etc) in a given directory
                            app.use(express.static(dir_name));
                            
                            // Launch the server
                            app.listen(port);
                            ```

                            https://github.com/web-classroom/example-express

                            Notes:

                            The callback functions passed to the app.get and app.post methods are called **middleware**. There can be multiple per route, and they are executed in the order they are defined, where the last one in the chain sends the response back to the client. One can also jump to the next middleware early using the next() function. They are used to process the request and response. Technically, the application's logic runs in the context of a middleware, but it is common to separate the code handling HTTP requests and responses from the code implementing the application's logic.
                            
                        </textarea>
                    </section>

                    <section data-markdown style="font-size: 0.6em;">
                        <textarea data-template>
                            ## <i class="fas fa-hand-paper"></i>  Multi-page applications (MPA)

                            It is the traditional solution : for each request, a new page is retrieved and entirely rendered, even if the change affects only a small part of the page.
                            
                            Most common type of web applications, strongly based on the client-server model, typically written in a server-side language (PHP, Python, or Java).

                            ### Advantages
                            Easy to develop, maintain, scale, test, secure, reference, deploy, and debug.

                            ### Disadvantages
                            Not very user-friendly, not very responsive, not very interactive.

                            When in doubt, start with a multi-page application.
                        </textarea>
                    </section>

                    <section data-markdown style="font-size: 0.6em;">
                        <textarea data-template>
                            ## <i class="fas fa-hand-paper"></i> MVC Pattern
                            
                            The Model-View-Controller (MVC) architectural pattern is commonly used for separating concerns of (1) data, (2) user interface, and (3) program logic.

                            - The **model** is responsible for managing the data. It notifies the view of any changes in the data, and reacts to notifications from the controller.
                            - The **view** is responsible for displaying the data to the user. It receives data from the model and sends user actions (e.g. button clicks) to the controller.
                            - The **controller** is responsible for handling user actions and updating the model and the view accordingly.

                            This allows for separation of concerns, code reuse, and parallel development. It is often used to organize the code in a multi-page application.

                        </textarea>
                    </section>

                    <section data-markdown style="font-size: 0.6em;">
                        <textarea data-template>
                            ## <i class="fas fa-hand-paper"></i> MPA and MVC in the real world

                            **Stackoverflow** is a multi-page application that uses the MVC pattern.

                            **Hacker News** is a multi-page application that uses the MVC pattern.
                            
                            **Facebook** and **Reddit** started as a multi-page application that used the MVC pattern.
                            
                            When exposed to trendy Web technologies, do a quick sanity check on BuildWith.

                            https://trends.builtwith.com/

                        </textarea>
                    </section>

                </section>
                
            </div>
		</div>
        
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/plugin/markdown/markdown.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/plugin/highlight/highlight.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/plugin/notes/notes.js"></script>
        <script src="./script.js" type="module"></script>

	</body>
</html>
